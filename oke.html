<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birthday Surprise! ðŸŽˆ</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@400;600&display=swap');

        body {
            margin: 0; padding: 0; min-height: 100vh;
            background: linear-gradient(to bottom, #a1c4fd 0%, #c2e9fb 100%);
            font-family: 'Poppins', sans-serif;
            overflow: hidden;
            display: flex; justify-content: center; align-items: center;
            -webkit-font-smoothing: antialiased;
        }

        /* --- BALON 3D --- */
        .balloon-wrapper {
            position: absolute; bottom: -300px; z-index: 5;
            animation: fly linear forwards; cursor: pointer;
        }

        .balloon {
            width: 85px; height: 105px;
            border-radius: 50% 50% 50% 50% / 45% 45% 55% 55%;
            position: relative;
            background: radial-gradient(circle at 30% 30%, var(--bg-color), rgba(0,0,0,0.3));
            box-shadow: inset -5px -10px 15px rgba(0,0,0,0.2), 5px 10px 20px rgba(0,0,0,0.1);
        }

        .balloon::before {
            content: ""; position: absolute; top: 15%; left: 20%;
            width: 20px; height: 30px; background: rgba(255, 255, 255, 0.4);
            border-radius: 50%; transform: rotate(20deg);
        }

        .balloon::after {
            content: ""; position: absolute; bottom: -5px; left: 50%;
            transform: translateX(-50%); border-left: 7px solid transparent;
            border-right: 7px solid transparent; border-bottom: 12px solid var(--bg-color);
            filter: brightness(0.8);
        }

        .wavy-string {
            position: absolute; top: 110px; left: 50%;
            transform: translateX(-50%); width: 20px; height: 100px;
        }

        @keyframes fly {
            0% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateX(15px) rotate(5deg); }
            100% { transform: translateY(-160vh) rotate(-10deg); }
        }

        /* --- KARTU UCAPAN --- */
        #card {
            display: none; position: fixed; top: 50%; left: 50%;
            transform: translate(-50%, -50%); width: 90vw; max-width: 380px;
            height: 85vh; background: #ffffff; border-radius: 25px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3); z-index: 100;
            overflow-y: auto; animation: popCard 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
            scrollbar-width: none;
        }

        @keyframes popCard {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }

        .photo-section { padding: 18px; display: flex; justify-content: center; }
        .photo-frame {
            width: 100%; height: 45vh; min-height: 280px;
            background: #fff; border-radius: 15px; border: 6px solid #f8f8f8;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1); overflow: hidden;
        }
        .photo-frame img { width: 100%; height: 100%; object-fit: cover; }

        .card-body { padding: 0 25px 35px 25px; text-align: center; }
        h1 { font-family: 'brush script std', cursive; color: #c2185b; margin: 12px 0; font-size: 35px; }
        .message { color: #DB7093; font-size: 17px; line-height: 1.8; margin-bottom: 25px; margin-top:25px; font-family:'cooper std black'; }
        .signature { font-weight: 600; color: #c2185b; font-size: 20px; font-family: 'bauhaus 93';}

        .instruction {
            position: fixed; top: 40px; background: #c2185b; color: white;
            padding: 10px 25px; border-radius: 50px; font-weight: 600;
            z-index: 10; font-size: 14px; box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>

    <div class="instruction" id="hint">ðŸŽˆ PECAHKAN BALONNYA!</div>

    <audio id="bdayMusic" loop>
        <source src="https://files.catbox.moe/9d7hp4.mp3" type="audio/mpeg">
    </audio>

    <div id="card">
        <div class="photo-section">
            <div class="photo-frame">
                <img src="https://i.ibb.co.com/Z1vv5gYS/aku.jpg" alt="aku">
            </div>
        </div>
        <div class="card-body">
            <h1>Happy Birthday! ðŸŽ‰</h1>
            <div class="message">
                "Di hari spesial ini, semoga kamu mendapatkan semua kebahagiaan yang kamu berikan kepada orang lain.
            </div>
            <div class="signature">- Happy Sweet Seventeen -</div>
        </div>
    </div>

    <script>
        // Palet warna konfeti: Pink, Biru, Kuning saja
        const selectedConfettiColors = ['#ff69b4', '#1e90ff', '#ffd700']; 
        
        // Palet warna balon tetap sama agar bervariasi
        const balloonColors = ['#ff4081', '#00e5ff', '#ffea00', '#76ff03', '#d500f9', '#ff3d00'];
        
        const music = document.getElementById('bdayMusic');
        const card = document.getElementById('card');
        const hint = document.getElementById('hint');
        let isCardOpen = false;

        function playPopSound() {
            const context = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = context.createOscillator();
            const gain = context.createGain();
            oscillator.type = 'sine';
            oscillator.frequency.setValueAtTime(150, context.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(0.01, context.currentTime + 0.1);
            gain.gain.setValueAtTime(0.1, context.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, context.currentTime + 0.1);
            oscillator.connect(gain);
            gain.connect(context.destination);
            oscillator.start(); oscillator.stop(context.currentTime + 0.1);
        }

        // Fungsi Konfeti Ledakan Selebrasi (Bukan Nonstop)
        function celebrate() {
            const end = Date.now() + (1.5 * 1000); // Durasi 3 detik

            (function frame() {
                confetti({
                    particleCount: 4,
                    angle: 60,
                    spread: 60,
                    origin: { x: 0, y: 0.65 },
                    colors: selectedConfettiColors // Menggunakan palet yang dipilih
                });
                confetti({
                    particleCount: 4,
                    angle: 120,
                    spread: 60,
                    origin: { x: 1, y: 0.65 },
                    colors: selectedConfettiColors // Menggunakan palet yang dipilih
                });

                if (Date.now() < end) {
                    requestAnimationFrame(frame);
                }
            }());
        }

        function createBalloon() {
            if (isCardOpen) return;
            const wrapper = document.createElement('div');
            wrapper.className = 'balloon-wrapper';
            wrapper.style.left = Math.random() * (window.innerWidth - 90) + 'px';
            const duration = Math.random() * 2 + 3;
            wrapper.style.animationDuration = duration + 's';
            const color = balloonColors[Math.floor(Math.random() * balloonColors.length)];
            wrapper.innerHTML = `
                <div class="balloon" style="--bg-color: ${color}"></div>
                <svg class="wavy-string" viewBox="0 0 20 100">
                    <path d="M10,0 Q15,25 10,50 T10,100" stroke="rgba(0,0,0,0.2)" stroke-width="2" fill="none" />
                </svg>`;

            wrapper.onclick = () => {
                isCardOpen = true;
                playPopSound(); 
                hint.style.display = 'none';
                document.querySelectorAll('.balloon-wrapper').forEach(el => el.remove());
                card.style.display = 'block';
                celebrate();
                try { music.play(); } catch(e) {}
            };
            document.body.appendChild(wrapper);
            setTimeout(() => { if(wrapper.parentNode) wrapper.remove(); }, duration * 1000);
        }

        setInterval(createBalloon, 500);
    </script>
</body>
</html>